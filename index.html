<!DOCTYPE html>
<html>
  <head>
    <!-- Basic meta tags for character encoding and responsive viewport -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ipsumify</title>

    <!-- External dependencies loaded from CDNs -->
    <!-- React core libraries for component-based UI -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <!-- Babel for JSX transpilation -->
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <!-- Tailwind CSS for utility-first styling -->
    <script src="https://cdn.tailwindcss.com"></script>

    <!-- Add custom styles -->
    <style>
      body {
        background: linear-gradient(135deg, #f5f7fa 0%, #e4e8ed 100%);
        min-height: 100vh;
      }
    </style>
  </head>
  <body>
    <!-- Root container for React application -->
    <div id="root"></div>

    <script type="text/babel">
      /**
       * Sample code blocks for different programming languages
       * These blocks are used as examples in the generated markdown
       * Each object contains:
       * - lang: The programming language identifier for syntax highlighting
       * - code: The actual code snippet to be inserted
       */
      const codeExamples = [
        {
          lang: "javascript",
          code: `function processData(input) {
  return input.map(x => x * 2)
    .filter(x => x > 10);
}`,
        },
        {
          lang: "bash",
          code: `#!/bin/bash
for i in {1..5}
do
  echo "Processing $i..."
  sleep 1
done`,
        },
        {
          lang: "python",
          code: `def fibonacci(n):
    if n <= 1:
        return n
    return fibonacci(n-1) + fibonacci(n-2)`,
        },
        {
          lang: "sql",
          code: `SELECT category, COUNT(*) as total
FROM products
GROUP BY category
HAVING total > 100;`,
        },
      ];

      /**
       * Custom SVG icon component for copy functionality
       * Renders a document copy icon using SVG paths
       * Used in the clipboard copy button
       * @returns {JSX.Element} SVG icon element
       */
      const CopyIcon = () => (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          strokeWidth="2"
          strokeLinecap="round"
          strokeLinejoin="round"
          className="w-4 h-4 mr-2"
        >
          <rect width="14" height="14" x="8" y="8" rx="2" ry="2" />
          <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2" />
        </svg>
      );

      /**
       * Spinner component for loading state
       * @returns {JSX.Element} Animated spinner
       */
      const Spinner = () => (
        <div className="flex justify-center p-12">
          <div className="animate-spin rounded-full h-16 w-16 border-t-4 border-b-4 border-blue-500"></div>
        </div>
      );

      /**
       * Main application component for the Lorem Markdown Generator
       * Handles all state management and content generation
       * @component
       */
      function LoremMarkdownGenerator() {
        // Add loading state
        const [isLoading, setIsLoading] = React.useState(false);

        // Add Latin words array at the top of the component
        const latinWords = [
          "Aether",
          "Bellum",
          "Carmen",
          "Deus",
          "Enim",
          "Fatum",
          "Gloria",
          "Homo",
          "Idem",
          "Jugum",
          "Lumen",
          "Mare",
          "Nox",
          "Opus",
          "Pax",
          "Quam",
          "Rex",
          "Sol",
          "Tempus",
          "Umbra",
          "Vita",
          "Vox",
          "Terra",
          "Sanctum",
          "Virtus",
          "Manus",
          "Caelum",
          "Anima",
          "Stella",
          "Ventus",
          "Magnus",
          "Patria",
          "Fortis",
          "Sapiens",
          "Veritas",
          "Natura",
          "Vis",
          "Lex",
          "Fides",
          "Amor",
          "Mors",
          "Pater",
          "Mater",
          "Filius",
          "Roma",
          "Diem",
          "Numen",
          "Corpus",
          "Annus",
          "Ignis",
          "Aqua",
          "Arbor",
          "Mons",
        ];

        // Add helper function to generate random headings
        const generateRandomHeading = () => {
          const getRandomWord = () =>
            latinWords[Math.floor(Math.random() * latinWords.length)];

          const length = Math.floor(Math.random() * 7) + 4; // 4-10 words
          const words = [];

          while (words.length < length) {
            const word = getRandomWord();
            if (!words.includes(word)) {
              // Avoid duplicate words
              words.push(word);
            }
          }

          return words.join(" ");
        };

        /**
         * State management for generator options
         * Controls various aspects of markdown generation including:
         * - Content types (headers, code, lists, etc.)
         * - Styling options (underlining, emphasis, etc.)
         * - Output format preferences
         */
        const [options, setOptions] = React.useState({
          noHeaders: false,
          noCodeSnippets: false,
          noInlineMarkup: false,
          noBlockquotes: false,
          noLists: false,
          noExternalLinks: false,
          noWrapping: false,
          underlinedHeaders: false,
          referenceLinks: false,
          emStyle: false,
          strongStyle: false,
          codeBlocks: false,
          numBlocks: 10,
        });

        /**
         * State for generated text and copy operation feedback
         */
        const [generatedText, setGeneratedText] = React.useState("");
        const [copySuccess, setCopySuccess] = React.useState(false);

        /**
         * Handles changes to option checkboxes
         * Toggles boolean states for various markdown generation options
         * @param {string} option - The option identifier to toggle
         */
        const handleOptionChange = (option) => {
          setOptions((prev) => ({
            ...prev,
            [option]: !prev[option],
          }));
        };

        /**
         * Generates a random paragraph of Latin-inspired text
         * Includes optional styling based on current options
         * @returns {string} Generated paragraph with optional markdown formatting
         */
        const generateParagraph = () => {
          const words = [
            "Lorem",
            "ipsum",
            "dolor",
            "sit",
            "amet",
            "consectetur",
            "adipiscing",
            "elit",
            "caligine",
            "fassaque",
            "portitor",
            "fine",
            "summo",
            "bis",
            "est",
            "orbus",
            // Additional Latin-inspired words
            "aether",
            "bellum",
            "carmen",
            "deus",
            "enim",
            "fatum",
            "gloria",
            "homo",
            "idem",
            "jugum",
            "lumen",
            "mare",
            "nox",
            "opus",
            "pax",
            "quam",
            "rex",
            "sol",
            "tempus",
            "umbra",
            "vita",
            "vox",
            "terra",
            "sanctum",
            "virtus",
            "manus",
            "caelum",
            "anima",
            "stella",
            "ventus",
          ];

          const getRandomWord = () =>
            words[Math.floor(Math.random() * words.length)];
          const getRandomInt = (min, max) =>
            Math.floor(Math.random() * (max - min + 1)) + min;

          const numSentences = getRandomInt(6, 9);
          let paragraph = "";

          for (let i = 0; i < numSentences; i++) {
            const sentenceLength = getRandomInt(8, 15);
            let sentence = "";

            for (let j = 0; j < sentenceLength; j++) {
              sentence += getRandomWord() + " ";
            }

            sentence = sentence.trim() + ". ";
            paragraph += sentence;
          }

          // Apply styling options to random words in the paragraph
          if (options.emStyle || options.strongStyle) {
            const words = paragraph.split(" ");
            words.forEach((word, i) => {
              if (Math.random() < 0.1) {
                // 10% chance for each word
                if (options.emStyle) {
                  words[i] = `_${word}_`;
                } else if (options.strongStyle) {
                  words[i] = `__${word}__`;
                }
              }
            });
            paragraph = words.join(" ");
          }

          return paragraph;
        };

        /**
         * Generates markdown headings with optional underlining
         * Supports different heading levels and styles
         * @param {number} level - The heading level (1-3)
         * @returns {string} Formatted markdown heading
         */
        const generateHeading = (level) => {
          const heading = generateRandomHeading();

          if (options.underlinedHeaders) {
            const underline =
              level === 1
                ? "=".repeat(heading.length)
                : "-".repeat(heading.length);
            return `${heading}\n${underline}\n\n`;
          }

          return `${"#".repeat(level)} ${heading}\n\n`;
        };

        /**
         * Creates code blocks with optional syntax highlighting
         * Supports both inline and block-style code formatting
         * @returns {string} Formatted code block in markdown
         */
        const generateCodeBlock = () => {
          const example =
            codeExamples[Math.floor(Math.random() * codeExamples.length)];
          if (options.codeBlocks) {
            return `\`\`\`${example.lang}\n${example.code}\n\`\`\`\n\n`;
          }
          // For inline code, just take the first line
          const firstLine = example.code.split("\n")[0];
          return `\`${firstLine}\`\n\n`;
        };

        /**
         * Main content generation function
         * Orchestrates the creation of complete markdown documents
         * Combines various elements (headings, paragraphs, lists, etc.)
         * @returns {string} Complete markdown document
         */
        const generateContent = () => {
          let content = "";

          if (!options.noHeaders) {
            const mainHeading = generateRandomHeading();
            content += options.underlinedHeaders
              ? `${mainHeading}\n${"=".repeat(mainHeading.length)}\n\n`
              : `# ${mainHeading}\n\n`;
          }

          const numSubheadings = Math.max(3, Math.floor(options.numBlocks / 4));
          const headingPositions = new Set();

          while (headingPositions.size < numSubheadings) {
            headingPositions.add(Math.floor(Math.random() * options.numBlocks));
          }

          for (let i = 0; i < options.numBlocks; i++) {
            if (headingPositions.has(i) && !options.noHeaders) {
              content += generateHeading(Math.random() < 0.3 ? 3 : 2);
            }

            content += generateParagraph() + "\n\n";

            if (!options.noLists && i % 4 === 1) {
              content +=
                "* Sanguine mendaci in supplex vertitur moenia\n* Quae nec frondes linguae\n* Hoc adalah medendi tamen\n\n";
            }

            if (!options.noCodeSnippets && i % 5 === 2) {
              content += generateCodeBlock();
            }

            // Handle reference-style links if enabled
            if (
              options.referenceLinks &&
              !options.noExternalLinks &&
              i % 3 === 0
            ) {
              content += `See [reference link][${
                i + 1
              }] for more information.\n\n`;
              content += `[${i + 1}]: https://example.com/ref${i + 1}\n`;
            } else if (!options.noExternalLinks && i % 3 === 0) {
              content += `See [inline link](https://example.com/page${
                i + 1
              }) for more information.\n\n`;
            }
          }

          return content;
        };

        /**
         * Event Handlers and Utility Functions
         */

        /**
         * Triggers markdown generation and updates state
         * Shows loading spinner during generation
         */
        const generateMarkdown = () => {
          setIsLoading(true);
          // Add slight delay to show loading state
          setTimeout(() => {
            const markdown = generateContent();
            setGeneratedText(markdown);
            setIsLoading(false);
          }, 800); // Add 800ms delay for visual feedback
        };

        /**
         * Handles copying generated text to clipboard
         * Includes fallback for browsers without clipboard API
         * Shows success feedback to user
         */
        const copyToClipboard = async () => {
          if (!generatedText) return;

          try {
            await navigator.clipboard.writeText(generatedText);
            setCopySuccess(true);
          } catch (err) {
            console.error("Failed to copy:", err);
            // Fallback method
            const textarea = document.createElement("textarea");
            textarea.value = generatedText;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand("copy");
            document.body.removeChild(textarea);
            setCopySuccess(true);
          }

          setTimeout(() => setCopySuccess(false), 2000);
        };

        /**
         * Formats current date for file naming
         * @returns {string} Formatted date string (YYYY-MM-DD)
         */
        const getFormattedDate = () => {
          const date = new Date();
          return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(
            2,
            "0"
          )}-${String(date.getDate()).padStart(2, "0")}`;
        };

        /**
         * Handles file download operations
         * Supports both .md and .txt formats
         * @param {string} extension - The file extension to use
         */
        const downloadFile = (extension) => {
          const blob = new Blob([generatedText], { type: "text/plain" });
          const url = window.URL.createObjectURL(blob);
          const a = document.createElement("a");
          a.href = url;
          a.download = `Markdown-${getFormattedDate()}${extension}`;
          document.body.appendChild(a);
          a.click();
          window.URL.revokeObjectURL(url);
          document.body.removeChild(a);
        };

        /**
         * Resets all options to their default values
         * Clears generated text
         */
        const resetOptions = () => {
          setOptions({
            noHeaders: false,
            noCodeSnippets: false,
            noInlineMarkup: false,
            noBlockquotes: false,
            noLists: false,
            noExternalLinks: false,
            noWrapping: false,
            underlinedHeaders: false,
            referenceLinks: false,
            emStyle: false,
            strongStyle: false,
            codeBlocks: false,
            numBlocks: 10,
          });
          setGeneratedText("");
        };

        /**
         * Component render method
         * Structures the UI into sections:
         * - Header with title and description
         * - Options panel with checkboxes
         * - Action buttons
         * - Output display with copy/download options
         * - Footer with GitHub link
         * @returns {JSX.Element} Complete UI structure
         */
        return (
          <div className="max-w-4xl mx-auto p-3 sm:p-6">
            {/* Header section with gradient */}
            <div className="mb-8 sm:mb-12 p-4 sm:p-8 bg-gradient-to-r from-blue-50 to-indigo-50 rounded-xl shadow-sm text-center">
              <h1 className="text-3xl sm:text-4xl font-serif mb-4 text-gray-800 bg-clip-text text-transparent bg-gradient-to-r from-blue-600 to-indigo-600 mx-auto">
                Ipsumify: A Markdown Generator
              </h1>
              <p className="text-base sm:text-lg text-gray-600 max-w-2xl mx-auto">
                Generate structured placeholder text in markdown format for your projects.
              </p>
            </div>

            {/* Instructions panel */}
            <div className="mb-6 sm:mb-8 p-4 sm:p-6 bg-white rounded-xl shadow-sm border border-gray-100">
              <p className="text-center text-gray-700">
                Configure your options below and generate customized markdown content.
              </p>
            </div>

            {/* Options grid with improved responsive styling */}
            <div className="grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8 mb-6 sm:mb-8">
              <div className="p-4 sm:p-6 bg-white rounded-xl shadow-sm border border-gray-100">
                <h2 className="font-medium mb-4 text-xl text-gray-800">
                  Basic Options
                </h2>
                <div className="space-y-3">
                  {[
                    ["noHeaders", "No headers"],
                    ["noCodeSnippets", "No code snippets"],
                    ["noInlineMarkup", "No inline markup"],
                    ["noBlockquotes", "No blockquotes"],
                    ["noLists", "No lists"],
                    ["noExternalLinks", "No external links"],
                    ["noWrapping", "No wrapping"],
                  ].map(([key, label]) => (
                    <div key={key} className="flex items-center">
                      <input
                        type="checkbox"
                        id={key}
                        checked={options[key]}
                        onChange={() => handleOptionChange(key)}
                        className="mr-2"
                      />
                      <label htmlFor={key}>{label}</label>
                    </div>
                  ))}
                </div>
              </div>

              <div className="p-4 sm:p-6 bg-white rounded-xl shadow-sm border border-gray-100">
                <h2 className="font-medium mb-4 text-xl text-gray-800">
                  Style Options
                </h2>
                <div className="space-y-3">
                  {[
                    ["underlinedHeaders", "Underlined headers"],
                    ["referenceLinks", "Reference-style links"],
                    ["emStyle", "_style em"],
                    ["strongStyle", "__style strong text"],
                    ["codeBlocks", "```-style code blocks"],
                  ].map(([key, label]) => (
                    <div key={key} className="flex items-center">
                      <input
                        type="checkbox"
                        id={key}
                        checked={options[key]}
                        onChange={() => handleOptionChange(key)}
                        className="mr-2"
                      />
                      <label htmlFor={key}>{label}</label>
                    </div>
                  ))}

                  <div className="mt-4">
                    <label className="block mb-1">Number of blocks:</label>
                    <input
                      type="number"
                      value={options.numBlocks}
                      onChange={(e) =>
                        setOptions((prev) => ({
                          ...prev,
                          numBlocks: parseInt(e.target.value) || 1,
                        }))
                      }
                      className="border p-1 w-20"
                      min="1"
                      max="10"
                    />
                  </div>
                </div>
              </div>
            </div>

            {/* Action buttons with responsive layout */}
            <div className="grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4 mb-6 sm:mb-8">
              <button
                onClick={generateMarkdown}
                disabled={isLoading}
                className={`border rounded-xl p-3 bg-gradient-to-r from-blue-600 to-blue-700 text-white hover:from-blue-700 hover:to-blue-800 font-medium transition-all duration-200 shadow-sm ${
                  isLoading ? "opacity-75 cursor-not-allowed" : ""
                }`}
              >
                {isLoading ? "Generating..." : "Generate some markdown!"}
              </button>
              <button
                onClick={resetOptions}
                className="border rounded-xl p-3 bg-gradient-to-r from-gray-600 to-gray-700 text-white hover:from-gray-700 hover:to-gray-800 font-medium transition-all duration-200 shadow-sm"
              >
                Reset
              </button>
            </div>

            {/* Show spinner when loading */}
            {isLoading && (
              <div className="mt-6">
                <Spinner />
              </div>
            )}

            {/* Show generated content only when not loading and content exists */}
            {!isLoading && generatedText && (
              <div className="mt-6">
                <div className="flex flex-col sm:flex-row justify-between gap-3 sm:gap-2 mb-4">
                  <div className="flex-shrink-0">
                    <button
                      onClick={copyToClipboard}
                      className={`w-full sm:w-auto flex items-center justify-center px-4 py-2 rounded-xl transition-all duration-200 shadow-sm ${
                        copySuccess
                          ? "bg-gradient-to-r from-blue-500 to-blue-600"
                          : "bg-gradient-to-r from-green-500 to-green-600"
                      } text-white hover:shadow-md`}
                    >
                      <CopyIcon />
                      {copySuccess ? "Copied!" : "Copy to Clipboard"}
                    </button>
                  </div>
                  <div className="flex gap-2 sm:space-x-2">
                    {["md", "txt"].map((ext) => (
                      <button
                        key={ext}
                        onClick={() => downloadFile(`.${ext}`)}
                        className="flex-1 sm:flex-none flex items-center justify-center px-4 py-2 rounded-xl transition-all duration-200 bg-gradient-to-r from-purple-500 to-purple-600 text-white hover:from-purple-600 hover:to-purple-700 shadow-sm hover:shadow-md"
                      >
                        Download .{ext}
                      </button>
                    ))}
                  </div>
                </div>
                <div
                  className={`p-4 sm:p-6 bg-white rounded-xl shadow-sm border border-gray-100 font-mono text-sm ${
                    options.noWrapping
                      ? "overflow-x-auto whitespace-nowrap"
                      : "whitespace-pre-wrap"
                  }`}
                >
                  {options.noWrapping
                    ? generatedText.replace(/\n/g, " ")
                    : generatedText}
                </div>
              </div>
            )}

            {/* Footer with responsive margins */}
            <footer className="mt-8 sm:mt-16 pt-6 sm:pt-8 border-t text-center text-gray-600">
              <a
                href="https://github.com/ICJIA/ipsumify-2025"
                target="_blank"
                rel="noopener noreferrer"
                className="inline-flex items-center hover:text-gray-900 transition-colors duration-200 p-2 rounded-lg hover:bg-white"
              >
                <svg
                  className="w-5 h-5 mr-2"
                  fill="currentColor"
                  viewBox="0 0 24 24"
                  aria-hidden="true"
                >
                  <path
                    fillRule="evenodd"
                    d="M12 2C6.477 2 2 6.484 2 12.017c0 4.425 2.865 8.18 6.839 9.504.5.092.682-.217.682-.483 0-.237-.008-.868-.013-1.703-2.782.605-3.369-1.343-3.369-1.343-.454-1.158-1.11-1.466-1.11-1.466-.908-.62.069-.608.069-.608 1.003.07 1.531 1.032 1.531 1.032.892 1.53 2.341 1.088 2.91.832.092-.647.35-1.088.636-1.338-2.22-.253-4.555-1.113-4.555-4.951 0-1.093.39-1.988 1.029-2.688-.103-.253-.446-1.272.098-2.65 0 0 .84-.27 2.75 1.026A9.564 9.564 0 0112 6.844c.85.004 1.705.115 2.504.337 1.909-1.296 2.747-1.027 2.747-1.027.546 1.379.202 2.398.1 2.651.64.7 1.028 1.595 1.028 2.688 0 3.848-2.339 4.695-4.566 4.943.359.309.678.92.678 1.855 0 1.338-.012 2.419-.012 2.747 0 .268.18.58.688.482A10.019 10.019 0 0022 12.017C22 6.484 17.522 2 12 2z"
                    clipRule="evenodd"
                  />
                </svg>
                View on GitHub
              </a>
            </footer>
          </div>
        );
      } // End of LoremMarkdownGenerator component

      // Initialize React application
      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<LoremMarkdownGenerator />);
    </script>
  </body>
</html>
