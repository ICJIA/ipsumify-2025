<!DOCTYPE html>
<html>
  <head>
    <!-- Basic meta tags for character encoding and responsive viewport -->
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Ipsumify</title>

    <!-- External dependencies loaded from CDNs -->
    <!-- React core libraries for component-based UI -->
    <script src="https://unpkg.com/react@18/umd/react.production.min.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.production.min.js"></script>

    <!-- Babel for JSX transpilation -->
    <script src="https://unpkg.com/babel-standalone@6/babel.min.js"></script>

    <!-- Tailwind CSS for utility-first styling -->
    <script src="https://cdn.tailwindcss.com"></script>
  </head>
  <body>
    <!-- Root container for React application -->
    <div id="root"></div>

    <script type="text/babel">
      // Sample code blocks for different programming languages
      // These will be randomly inserted into the generated markdown
      const codeExamples = [
        {
          lang: 'javascript',
          code: `function processData(input) {
  return input.map(x => x * 2)
    .filter(x => x > 10);
}`
        },
        {
          lang: 'bash',
          code: `#!/bin/bash
for i in {1..5}
do
  echo "Processing $i..."
  sleep 1
done`
        },
        {
          lang: 'python',
          code: `def fibonacci(n):
    if n <= 1:
        return n
    return fibonacci(n-1) + fibonacci(n-2)`
        },
        {
          lang: 'sql',
          code: `SELECT category, COUNT(*) as total
FROM products
GROUP BY category
HAVING total > 100;`
        }
      ];

      // Custom SVG icon component for copy functionality
      const CopyIcon = () => (
        <svg
          xmlns="http://www.w3.org/2000/svg"
          width="16"
          height="16"
          viewBox="0 0 24 24"
          fill="none"
          stroke="currentColor"
          strokeWidth="2"
          strokeLinecap="round"
          strokeLinejoin="round"
          className="w-4 h-4 mr-2"
        >
          <rect width="14" height="14" x="8" y="8" rx="2" ry="2" />
          <path d="M4 16c-1.1 0-2-.9-2-2V4c0-1.1.9-2 2-2h10c1.1 0 2 .9 2 2" />
        </svg>
      );

      // Main application component
      function LoremMarkdownGenerator() {
        // State management for generator options and generated text
        const [options, setOptions] = React.useState({
          noHeaders: false,
          noCodeSnippets: false,
          noInlineMarkup: false,
          noBlockquotes: false,
          noLists: false,
          noExternalLinks: false,
          noWrapping: false,
          underlinedHeaders: false,
          referenceLinks: false,
          emStyle: false,
          strongStyle: false,
          codeBlocks: false,
          numBlocks: 10,
        });

        const [generatedText, setGeneratedText] = React.useState("");
        const [copySuccess, setCopySuccess] = React.useState(false);

        const handleOptionChange = (option) => {
          setOptions((prev) => ({
            ...prev,
            [option]: !prev[option],
          }));
        };

        // Helper functions for text generation
        
        // Creates a random paragraph with optional styling
        const generateParagraph = () => {
          const words = [
            "Lorem", "ipsum", "dolor", "sit", "amet", "consectetur",
            "adipiscing", "elit", "caligine", "fassaque", "portitor",
            "fine", "summo", "bis", "est", "orbus",
            // Additional Latin-inspired words
            "aether", "bellum", "carmen", "deus", "enim",
            "fatum", "gloria", "homo", "idem", "jugum",
            "lumen", "mare", "nox", "opus", "pax",
            "quam", "rex", "sol", "tempus", "umbra",
            "vita", "vox", "terra", "sanctum", "virtus",
            "manus", "caelum", "anima", "stella", "ventus"
          ];

          const getRandomWord = () =>
            words[Math.floor(Math.random() * words.length)];
          const getRandomInt = (min, max) =>
            Math.floor(Math.random() * (max - min + 1)) + min;

          const numSentences = getRandomInt(6, 9);
          let paragraph = "";

          for (let i = 0; i < numSentences; i++) {
            const sentenceLength = getRandomInt(8, 15);
            let sentence = "";

            for (let j = 0; j < sentenceLength; j++) {
              sentence += getRandomWord() + " ";
            }

            sentence = sentence.trim() + ". ";
            paragraph += sentence;
          }

          // Apply styling options to random words in the paragraph
          if (options.emStyle || options.strongStyle) {
            const words = paragraph.split(" ");
            words.forEach((word, i) => {
              if (Math.random() < 0.1) {
                // 10% chance for each word
                if (options.emStyle) {
                  words[i] = `_${word}_`;
                } else if (options.strongStyle) {
                  words[i] = `__${word}__`;
                }
              }
            });
            paragraph = words.join(" ");
          }

          return paragraph;
        };

        // Generates markdown headings with optional underlining
        const generateHeading = (level) => {
          const headings = [
            "Canis trahenti habemus",
            "Cassis nutantia in gutture crine",
            "Vis agam est",
            "Marem dei nomen",
            // Additional headings
            "Tempus Fugit Inexorabile",
            "Astra Inclinant Non Necessitant",
            "Veritas Vincit Omnia",
            "Sapiens Dominabitur Astris",
            "Fortuna Audaces Iuvat",
            "Memento Vivere Et Amare",
            "Natura Non Constristatur",
            "Semper Ad Meliora",
            "Carpe Noctem Quam Diem",
            "Faber Est Suae Quisque",
            "Cogito Ergo Sum Eternum",
            "Ars Longa Vita Brevis",
            "Vincit Qui Se Vincit",
            "Audentes Fortuna Juvat",
            "Lux Et Veritas Vitae",
            "Ad Astra Per Aspera",
            "Omnia Mutantur Nos",
            "Sic Itur Ad Astra",
            "Mens Sana In Corpore",
            "Per Ardua Ad Alta"
          ];
          const heading = headings[Math.floor(Math.random() * headings.length)];

          if (options.underlinedHeaders) {
            // Create underlined headers using = for h1 and - for h2/h3
            const underline =
              level === 1
                ? "=".repeat(heading.length)
                : "-".repeat(heading.length);
            return `${heading}\n${underline}\n\n`;
          }

          return `${"#".repeat(level)} ${heading}\n\n`;
        };

        // Creates code blocks with syntax highlighting
        const generateCodeBlock = () => {
          const example = codeExamples[Math.floor(Math.random() * codeExamples.length)];
          if (options.codeBlocks) {
            return `\`\`\`${example.lang}\n${example.code}\n\`\`\`\n\n`;
          }
          // For inline code, just take the first line
          const firstLine = example.code.split('\n')[0];
          return `\`${firstLine}\`\n\n`;
        };

        // Main content generation function
        const generateContent = () => {
          let content = "";

          if (!options.noHeaders) {
            content += options.underlinedHeaders
              ? "Caligine fassaque portitor fine summo bis est\n=======================================\n\n"
              : "# Caligine fassaque portitor fine summo bis est\n\n";
          }

          const numSubheadings = Math.max(3, Math.floor(options.numBlocks / 4));
          const headingPositions = new Set();

          while (headingPositions.size < numSubheadings) {
            headingPositions.add(Math.floor(Math.random() * options.numBlocks));
          }

          for (let i = 0; i < options.numBlocks; i++) {
            if (headingPositions.has(i) && !options.noHeaders) {
              content += generateHeading(Math.random() < 0.3 ? 3 : 2);
            }

            content += generateParagraph() + "\n\n";

            if (!options.noLists && i % 4 === 1) {
              content +=
                "* Sanguine mendaci in supplex vertitur moenia\n* Quae nec frondes linguae\n* Hoc adalah medendi tamen\n\n";
            }

            if (!options.noCodeSnippets && i % 5 === 2) {
              content += generateCodeBlock();
            }

            // Handle reference-style links if enabled
            if (
              options.referenceLinks &&
              !options.noExternalLinks &&
              i % 3 === 0
            ) {
              content += `See [reference link][${
                i + 1
              }] for more information.\n\n`;
              content += `[${i + 1}]: https://example.com/ref${i + 1}\n`;
            } else if (!options.noExternalLinks && i % 3 === 0) {
              content += `See [inline link](https://example.com/page${
                i + 1
              }) for more information.\n\n`;
            }
          }

          return content;
        };

        // Event handlers and utility functions

        // Triggers markdown generation
        const generateMarkdown = () => {
          const markdown = generateContent();
          setGeneratedText(markdown);
        };

        // Handles clipboard operations
        const copyToClipboard = async () => {
          if (!generatedText) return;

          try {
            await navigator.clipboard.writeText(generatedText);
            setCopySuccess(true);
          } catch (err) {
            console.error("Failed to copy:", err);
            // Fallback method
            const textarea = document.createElement("textarea");
            textarea.value = generatedText;
            document.body.appendChild(textarea);
            textarea.select();
            document.execCommand("copy");
            document.body.removeChild(textarea);
            setCopySuccess(true);
          }

          setTimeout(() => setCopySuccess(false), 2000);
        };

        // Formats current date for file naming
        const getFormattedDate = () => {
          const date = new Date();
          return `${date.getFullYear()}-${String(date.getMonth() + 1).padStart(
            2,
            "0"
          )}-${String(date.getDate()).padStart(2, "0")}`;
        };

        // Handles file download operations
        const downloadFile = (extension) => {
          const blob = new Blob([generatedText], { type: "text/plain" });
          const url = window.URL.createObjectURL(blob);
          const a = document.createElement("a");
          a.href = url;
          a.download = `Markdown-${getFormattedDate()}${extension}`;
          document.body.appendChild(a);
          a.click();
          window.URL.revokeObjectURL(url);
          document.body.removeChild(a);
        };

        // Resets all options to default values
        const resetOptions = () => {
          setOptions({
            noHeaders: false,
            noCodeSnippets: false,
            noInlineMarkup: false,
            noBlockquotes: false,
            noLists: false,
            noExternalLinks: false,
            noWrapping: false,
            underlinedHeaders: false,
            referenceLinks: false,
            emStyle: false,
            strongStyle: false,
            codeBlocks: false,
            numBlocks: 10,
          });
          setGeneratedText("");
        };

        // Component render method with UI structure
        return (
          <div className="max-w-4xl mx-auto p-6">
            <h1 className="text-2xl font-serif mb-6">
              Ipsumify: A Markdown Generator
            </h1>

            <div className="border-t border-b py-4 mb-6">
              <p className="mb-4">
                A simple webapp that generates structured placeholder text in
                markdown format.
              </p>
            </div>

            <div className="grid grid-cols-2 gap-8 mb-6">
              <div>
                <h2 className="font-medium mb-3">Basic Options</h2>
                <div className="space-y-2">
                  {[
                    ["noHeaders", "No headers"],
                    ["noCodeSnippets", "No code snippets"],
                    ["noInlineMarkup", "No inline markup"],
                    ["noBlockquotes", "No blockquotes"],
                    ["noLists", "No lists"],
                    ["noExternalLinks", "No external links"],
                    ["noWrapping", "No wrapping"],
                  ].map(([key, label]) => (
                    <div key={key} className="flex items-center">
                      <input
                        type="checkbox"
                        id={key}
                        checked={options[key]}
                        onChange={() => handleOptionChange(key)}
                        className="mr-2"
                      />
                      <label htmlFor={key}>{label}</label>
                    </div>
                  ))}
                </div>
              </div>

              <div>
                <h2 className="font-medium mb-3">Style Options</h2>
                <div className="space-y-2">
                  {[
                    ["underlinedHeaders", "Underlined headers"],
                    ["referenceLinks", "Reference-style links"],
                    ["emStyle", "_style em"],
                    ["strongStyle", "__style strong text"],
                    ["codeBlocks", "```-style code blocks"],
                  ].map(([key, label]) => (
                    <div key={key} className="flex items-center">
                      <input
                        type="checkbox"
                        id={key}
                        checked={options[key]}
                        onChange={() => handleOptionChange(key)}
                        className="mr-2"
                      />
                      <label htmlFor={key}>{label}</label>
                    </div>
                  ))}

                  <div className="mt-4">
                    <label className="block mb-1">Number of blocks:</label>
                    <input
                      type="number"
                      value={options.numBlocks}
                      onChange={(e) =>
                        setOptions((prev) => ({
                          ...prev,
                          numBlocks: parseInt(e.target.value) || 1,
                        }))
                      }
                      className="border p-1 w-20"
                      min="1"
                      max="10"
                    />
                  </div>
                </div>
              </div>
            </div>

            <div className="grid grid-cols-2 gap-4">
              <button
                onClick={generateMarkdown}
                className="border rounded p-3 bg-blue-500 text-white hover:bg-gray-100 hover:text-black font-medium"
              >
                Generate some markdown!
              </button>
              <button
                onClick={resetOptions}
                className="border rounded p-3 hover:bg-gray-100 bg-gray-500 text-white hover:bg-gray-600 font-medium"
              >
                Reset
              </button>
            </div>

            {generatedText && (
              <div className="mt-6">
                <div className="flex justify-between mb-2">
                  <div className="flex-shrink-0">
                    <button
                      onClick={copyToClipboard}
                      className={`flex items-center justify-center px-4 py-2 rounded transition-colors ${
                        copySuccess
                          ? "bg-blue-500 hover:bg-blue-600"
                          : "bg-green-500 hover:bg-green-600"
                      } text-white`}
                    >
                      <CopyIcon />
                      {copySuccess ? "Copied!" : "Copy to Clipboard"}
                    </button>
                  </div>
                  <div className="flex space-x-2">
                    <button
                      onClick={() => downloadFile(".md")}
                      className="flex items-center justify-center px-4 py-2 rounded transition-colors bg-purple-500 hover:bg-purple-600 text-white"
                    >
                      Download .md
                    </button>
                    <button
                      onClick={() => downloadFile(".txt")}
                      className="flex items-center justify-center px-4 py-2 rounded transition-colors bg-purple-500 hover:bg-purple-600 text-white"
                    >
                      Download .txt
                    </button>
                  </div>
                </div>
                <div
                  className={`p-4 bg-gray-50 rounded font-mono border text-sm ${
                    options.noWrapping
                      ? "overflow-x-auto whitespace-nowrap"
                      : "whitespace-pre-wrap"
                  }`}
                >
                  {options.noWrapping
                    ? generatedText.replace(/\n/g, " ")
                    : generatedText}
                </div>
              </div>
            )}
          </div>
        );
      }

      // Initialize React application
      const root = ReactDOM.createRoot(document.getElementById("root"));
      root.render(<LoremMarkdownGenerator />);
    </script>
  </body>
</html>
